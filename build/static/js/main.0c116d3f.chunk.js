(this["webpackJsonpcapstone-banking-app"]=this["webpackJsonpcapstone-banking-app"]||[]).push([[0],{38:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(27),r=a.n(s),l=(a(38),a(6)),o=a(8),i=a(2),u=a(33),b=a(28),d=function(e,t,a,n){var c=n?-1:1,s=Object(u.a)(e);for(var r in s)s[r].email===t&&(console.log(s[r]),s[r].balance+=a*c);return s},j=a.n(b)()((function(e){return{users:[],user:null,loadUsers:function(t){return e((function(e){return{users:t}}))},addUser:function(t){return e((function(){return{user:t}}))},changeBalance:function(t,a,n){return e((function(e){return{users:d(e.users,t,a,n)}}))},deleteAllUsers:function(){return e((function(e){return{users:[]}}))}}})),h=a(1);function m(){var e=j((function(e){return e.user}))||localStorage.getItem("token");return Object(h.jsxs)("navbar",{children:[Object(h.jsx)("h2",{className:"text-left font-normal text-cyan-700 p-2 ",children:"Third Coast Bank"}),Object(h.jsx)("h2",{className:"text-right text-cyan-700 p-2",children:null===e||void 0===e?void 0:e.name}),Object(h.jsxs)("div",{className:"flex flex-row items-stretch justify-around bg-cyan-700 font-light text-white mb-3",children:[Object(h.jsx)(o.b,{to:"/",className:"p-2 hover:bg-cyan-400",exact:!0,activeClassName:"bg-cyan-600",children:"Home"}),e?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(o.b,{to:"/new-account",className:"p-2 hover:bg-cyan-400",exact:!0,activeClassName:"bg-cyan-600",children:"Open New Account"}),Object(h.jsx)(o.b,{to:"/profile",className:"p-2 hover:bg-cyan-400",exact:!0,activeClassName:"bg-cyan-600",children:"My Profile"}),Object(h.jsx)(o.b,{to:"/deposit",className:"p-2 hover:bg-cyan-400",exact:!0,activeClassName:"bg-cyan-600",children:"Deposit"}),Object(h.jsx)(o.b,{to:"/withdraw",className:"p-2 hover:bg-cyan-400",exact:!0,activeClassName:"bg-cyan-600",children:"Withdraw"}),Object(h.jsx)(o.b,{to:"#",className:"p-2 hover:bg-cyan-400",exact:!0,onClick:function(){localStorage.clear(),window.location.href="/"},activeClassName:"bg-cyan-600",children:"Logout"})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(o.b,{to:"/register",className:"p-2 hover:bg-cyan-400",exact:!0,activeClassName:"bg-cyan-600",children:"Register"}),Object(h.jsx)(o.b,{to:"/login",className:"p-2 hover:bg-cyan-500",exact:!0,activeClassName:"bg-cyan-600",children:"Login"})]})]})]})}var p=a.p+"static/media/wallet.4703ecde.svg";function x(){return Object(h.jsxs)("div",{className:"center flex mx-12 text-center p-4 m-12 bg-orange-100 w-3/4 justify-items-center",children:[Object(h.jsx)("img",{className:"w-1/2 max-h-60 p-3",src:p,alt:"A wallet"}),Object(h.jsxs)("div",{className:"w-1/2 flex flex-col min-h-1/2-space-y-3 text-center",children:[Object(h.jsx)("h1",{className:"font-bold text-xl text-center",children:"Welcome to Third Coast Bank!"}),Object(h.jsx)("p",{className:"font-normal text-center",children:"We aim to make banking run as smoothly as the gentle waves rolling by on the freshest coast around."})]})]})}var f=a(3),O=a.n(f),g=a(7),v=a(15);function y(e){var t=e.action,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)(null),i=Object(l.a)(o,2),u=i[0],b=i[1];Object(n.useEffect)((function(){Object(g.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000","/account/all"),{headers:{jwt:localStorage.getItem("token")}});case 3:return t=e.sent,e.next=6,t.json();case 6:t=e.sent,r(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("an error==>>",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),Object(n.useEffect)((function(){Object(g.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000","/profile"),{headers:{jwt:localStorage.getItem("token")}});case 3:return t=e.sent,e.next=6,t.json();case 6:t=e.sent,b(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("an error==>>",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);var d=Object(v.a)({initialValues:{amount:0,acctNo:""},onSubmit:function(){return m()}}),j=function(){var e=Object(g.a)(O.a.mark((function e(t,a,n){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Withdraw"===n&&(a*=-1),e.prev=1,e.next=4,fetch("".concat("http://localhost:5000","/account/change_balance"),{method:"post",body:JSON.stringify({acctNo:t,amount:a}),headers:{jwt:localStorage.getItem("token"),"content-type":"application/json"}});case 4:return c=e.sent,e.next=7,c.json();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("an error==>>",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),m=function(){!0!==isNaN(d.values.amount)?d.values.amount<=0?alert("please enter only a positive numbers"):u?"Withdraw"===t&&d.values.amount>u.balance?alert("transaction invalid"):(j(d.values.acctNo,d.values.amount,t),alert("Success!")):alert("invalid credentials"):alert("please enter numbers only")};return Object(h.jsx)("div",{className:"flex justify-center",children:Object(h.jsxs)("form",{className:"flex flex-col bg-orange-100 rounded-lg p-6 m-12 space-y-4",onSubmit:d.handleSubmit,children:[Object(h.jsx)("h3",{className:"flex flex-col space-y-1 bg-orange-100 rounded-lg p-6text-lg font-semibold",children:t}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"acctNo",children:"Acct Number"}),Object(h.jsxs)("select",{type:"number",id:"acctNo",onChange:d.handleChange,value:d.values.acctNo,children:[Object(h.jsx)("option",{value:"",children:"Select Acct No"}),s.map((function(e,t){return Object(h.jsx)("option",{value:e.acctNo,children:e.acctNo},t)}))]})]}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"amount",children:"".concat(t,":")}),Object(h.jsx)("input",{type:"number",id:"amount",name:"amount",onChange:d.handleChange,value:d.values.amount})]}),Object(h.jsx)("button",{type:"submit",disabled:!d.values.amount,className:"rounded bg-gradient-to-r from-cyan-500 to-cyan-700 hover:from-cyan-700 hover:to-emerald-400 ... py-2 font-semibold ".concat(!d.values.amount&&"text-gray-50"),children:"Submit"})]})})}function N(){return Object(h.jsx)("div",{children:Object(h.jsx)(y,{action:"Withdraw"})})}function w(){return Object(h.jsx)("div",{children:Object(h.jsx)(y,{action:"Deposit"})})}function S(e){e.setPopUp;var t=j((function(e){return e.addUser})),a=Object(i.g)(),c=Object(v.a)({initialValues:{acctName:"",balance:""},onSubmit:function(){var e=Object(g.a)(O.a.mark((function e(n){var s,r,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=n.acctName,r=n.balance,e.next=4,fetch("".concat("http://localhost:5000","/account/open"),{method:"post",headers:{"Content-Type":"application/json",jwt:localStorage.getItem("token")},body:JSON.stringify({acctName:s,balance:r})});case 4:return l=e.sent,e.next=7,l.json();case 7:t({acctName:s,balance:r}),c.setValues({acctName:"",balance:""}),a.push("/deposit"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("an errr==>>",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}),s=Object(n.useState)(!0),r=Object(l.a)(s,2),o=r[0],u=r[1];return Object(n.useEffect)((function(){c.values.acctName&&c.values.balance?u(!1):u(!0)}),[c.values]),Object(h.jsx)("div",{className:"flex justify-center",children:Object(h.jsxs)("form",{onSubmit:c.handleSubmit,className:"flex flex-col space-y-1 bg-orange-100 rounded-lg p-6 m-12",children:[Object(h.jsx)("h3",{className:" flex flex-col space-y-1 bg-orange-100 rounded-lg p-6text-lg font-semibold",children:"Open a New Bank Account"}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"acctName",children:"Account Name"}),Object(h.jsx)("input",{type:"text",id:"acctName",name:"acctName",onChange:c.handleChange,value:c.values.acctName})]}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"balance",children:"Account Balance"}),Object(h.jsx)("input",{type:"number",id:"balance",name:"balance",onChange:c.handleChange,value:c.values.balance})]}),Object(h.jsx)("button",{type:"submit",disabled:o,className:"rounded bg-gradient-to-r from-cyan-500 to-cyan-700 hover:from-cyan-700 hover:to-emerald-400 ... py-2 font-semibold ".concat(o&&"text-gray-50"),children:"Create Account"})]})})}function k(e){e.setPopUp;var t=j((function(e){return e.addUser})),a=Object(i.g)(),c=Object(v.a)({initialValues:{name:"",email:"",password:""},onSubmit:function(){var e=Object(g.a)(O.a.mark((function e(n){var s,r,l,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=n.name,r=n.email,l=n.password,e.next=4,fetch("".concat("http://localhost:5000","/signup"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:r,password:l})});case 4:return o=e.sent,e.next=7,o.json();case 7:o=e.sent,localStorage.setItem("token",o),t({name:s,email:r,password:l}),c.setValues({email:"",name:"",password:""}),a.push("/account"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("an errr==>>",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()}),s=Object(n.useState)(!0),r=Object(l.a)(s,2),o=r[0],u=r[1];return Object(n.useEffect)((function(){c.values.name&&c.values.name&&c.values.password?u(!1):u(!0)}),[c.values]),Object(h.jsx)("div",{className:"flex justify-center",children:Object(h.jsxs)("form",{onSubmit:c.handleSubmit,className:"flex flex-col space-y-1 bg-orange-100 rounded-lg p-6 m-12",children:[Object(h.jsx)("h3",{className:" flex flex-col space-y-1 bg-orange-100 rounded-lg p-6text-lg font-semibold",children:"Create a New User Account"}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"name",children:"Name"}),Object(h.jsx)("input",{type:"text",id:"name",name:"name",onChange:c.handleChange,value:c.values.name})]}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email"}),Object(h.jsx)("input",{type:"email",id:"email",name:"email",onChange:c.handleChange,value:c.values.email})]}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password",name:"password",onChange:c.handleChange,value:c.values.password})]}),Object(h.jsx)("button",{type:"submit",disabled:o,className:"rounded bg-gradient-to-r from-cyan-500 to-cyan-700 hover:from-cyan-700 hover:to-emerald-400 ... py-2 font-semibold ".concat(o&&"text-gray-50"),children:"Sign up!"})]})})}function C(e){e.setPopUp;var t=j((function(e){return e.addUser})),a=Object(i.g)(),c=Object(v.a)({initialValues:{email:"",password:""},onSubmit:function(){var e=Object(g.a)(O.a.mark((function e(n){var s,r,l,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=n.email,r=n.password,e.next=4,fetch("".concat("http://localhost:5000","/login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:r})});case 4:return l=e.sent,e.next=7,l.json();case 7:return l=e.sent,localStorage.setItem("token",l),t({email:s,password:r}),c.setValues({email:"",password:""}),e.next=13,fetch("".concat("http://localhost:5000","/account/count"),{headers:{jwt:l}});case 13:return o=e.sent,e.next=16,o.json();case 16:(o=e.sent).accountsOpened?a.push("/deposit"):a.push("/account"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("an errr==>>",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()}),s=Object(n.useState)(!0),r=Object(l.a)(s,2),o=r[0],u=r[1];return Object(n.useEffect)((function(){c.values.email&&c.values.password?u(!1):u(!0)}),[c.values]),Object(h.jsx)("div",{className:"flex justify-center",children:Object(h.jsxs)("form",{onSubmit:c.handleSubmit,className:"flex flex-col space-y-1 bg-orange-100 rounded-lg p-6 m-12",children:[Object(h.jsx)("h3",{className:" flex flex-col space-y-1 bg-orange-100 rounded-lg p-6text-lg font-semibold",children:"Login to your Account"}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email"}),Object(h.jsx)("input",{type:"email",id:"email",name:"email",onChange:c.handleChange,value:c.values.email})]}),Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password",name:"password",onChange:c.handleChange,value:c.values.password})]}),Object(h.jsx)("button",{type:"submit",disabled:o,className:"rounded bg-gradient-to-r from-cyan-500 to-cyan-700 hover:from-cyan-700 hover:to-emerald-400 ... py-2 font-semibold ".concat(o&&"text-gray-50"),children:"Login!"})]})})}var U=a(32),A=a.n(U);function E(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){Object(g.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000","/profile"),{headers:{jwt:localStorage.getItem("token")}});case 3:return t=e.sent,e.next=6,t.json();case 6:t=e.sent,c(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("an error==>>",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);var s=j((function(e){return e.deleteAllUsers}));return Object(h.jsxs)("div",{children:[Object(h.jsx)(A.a,{src:a,displayDataTypes:!1}),Object(h.jsx)("button",{onClick:s,className:"rounded text-white bg-gradient-to-r from-cyan-500 to-cyan-700 hover:from-cyan-700 hover:to-emerald-400 ... p-2",children:"Delete transaction history?"})]})}function F(e){var t=e.setPopUp,a=e.title,c=e.message,s=Object(n.useState)(!1),r=Object(l.a)(s,2),o=r[0],u=r[1],b=function(){var e=Object(g.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(!0);case 2:t(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"absolute w-full h-full border-2 flex justify-center items-center",children:[Object(h.jsxs)("div",{className:"flex flex-col py-4 h-auto w-1/4 text-center border-4 border-black bg-white",children:[Object(h.jsx)("h2",{className:"text-3xl font-bold",children:a}),Object(h.jsx)("span",{children:c}),Object(h.jsxs)("div",{className:"flex justify-center space-x-4",children:[Object(h.jsx)("button",{onClick:b,className:"p-2 font-light w-1/5 text-white bg-cyan-700",children:"No"}),Object(h.jsx)("button",{onClick:function(){t(!1)},className:"p-2 font-light w-1/5 text-white bg-cyan-700",children:"Yes"})]})]}),o&&Object(h.jsx)(i.a,{to:"/"})]})}var I=function(){var e=j((function(e){return e.users})),t=j((function(e){return e.loadUsers})),a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("Users"));t(e||[{name:"admin",email:"admin.t@com",password:"123"}])}),[]),Object(n.useEffect)((function(){localStorage.setItem("Users",JSON.stringify(e))}),[e]),Object(h.jsxs)(o.a,{children:[s&&Object(h.jsx)(F,{setPopUp:r,title:s.title,message:s.message}),Object(h.jsxs)("div",{className:"container mx-auto",children:[Object(h.jsx)(m,{}),Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/withdraw",children:Object(h.jsx)(N,{})}),Object(h.jsx)(i.b,{path:"/deposit",children:Object(h.jsx)(w,{})}),Object(h.jsx)(i.b,{path:"/register",children:Object(h.jsx)(k,{setPopUp:r})}),Object(h.jsx)(i.b,{path:"/new-account",children:Object(h.jsx)(S,{setPopUp:r})}),Object(h.jsx)(i.b,{path:"/login",component:C}),Object(h.jsx)(i.b,{path:"/profile",children:Object(h.jsx)(E,{})}),Object(h.jsx)(i.b,{path:"/",children:Object(h.jsx)(x,{})})]})]})]})};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.0c116d3f.chunk.js.map